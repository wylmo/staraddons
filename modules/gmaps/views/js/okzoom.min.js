/*
 * OKZoom by OKFocus v1.1
 * http://okfoc.us // @okfocus
 * Copyright 2012 OKFocus
 * Licensed under the MIT License`
**/
$(function(c){c.fn.okzoom=function(a){a=c.extend({},c.fn.okzoom.defaults,a);return this.each(function(){var b={};b.options=a;b.$el=c(this);b.el=this;b.listener=document.createElement("div");b.$listener=c(b.listener).addClass("ok-listener").css({position:"absolute",zIndex:1E4});c("body").append(b.$listener);var d=document.createElement("div");d.id="ok-loupe";d.style.position="absolute";d.style.backgroundRepeat="no-repeat";d.style.pointerEvents="none";d.style.display="none";d.style.zIndex=7879;c("body").append(d);
b.loupe=d;b.$el.data("okzoom",b);b.options=a;c(b.el).bind("mouseover",function(a){return function(b){c.fn.okzoom.build(a,b)}}(b));b.$listener.bind("mousemove",function(a){return function(b){c.fn.okzoom.mousemove(a,b)}}(b));b.$listener.bind("mouseout",function(a){return function(b){c.fn.okzoom.mouseout(a,b)}}(b));b.options.height=b.options.height||b.options.width;d=b.$el.data("okimage");b.has_data_image="undefined"!==typeof d;b.has_data_image&&(b.img=new Image,b.img.src=d)})};c.fn.okzoom.defaults=
{width:150,height:null,scaleWidth:null,round:!0,background:"#fff",backgroundRepeat:"no-repeat",shadow:"0 0 5px #000",border:0};c.fn.okzoom.build=function(a,b){a.has_data_image||(a.img=a.el);if(c.browser.msie&&9>c.browser.version&&!a.img.naturalized)if(a.img.complete)(function(a){var a=a||this,b=new Image;b.el=a;b.src=a.src;a.naturalWidth=b.width;a.naturalHeight=b.height;a.naturalized=true})(a.img);else return;a.offset=a.$el.offset();a.width=a.$el.width();a.height=a.$el.height();a.$listener.css({display:"block",
width:a.$el.outerWidth(),height:a.$el.outerHeight(),top:a.$el.offset().top,left:a.$el.offset().left});a.options.scaleWidth?(a.naturalWidth=a.options.scaleWidth,a.naturalHeight=Math.round(a.img.naturalHeight*a.options.scaleWidth/a.img.naturalWidth)):(a.naturalWidth=a.img.naturalWidth,a.naturalHeight=a.img.naturalHeight);a.widthRatio=a.naturalWidth/a.width;a.heightRatio=a.naturalHeight/a.height;a.loupe.style.width=a.options.width+"px";a.loupe.style.height=a.options.height+"px";a.loupe.style.border=
a.options.border;a.loupe.style.background=a.options.background+" url("+a.img.src+")";a.loupe.style.backgroundRepeat=a.options.backgroundRepeat;a.loupe.style.backgroundSize=a.options.scaleWidth?a.naturalWidth+"px "+a.naturalHeight+"px":"auto";a.loupe.style.borderRadius=a.loupe.style.OBorderRadius=a.loupe.style.MozBorderRadius=a.loupe.style.WebkitBorderRadius=a.options.round?a.options.width+"px":0;a.loupe.style.boxShadow=a.options.shadow;a.initialized=!0;c.fn.okzoom.mousemove(a,b)};c.fn.okzoom.mousemove=
function(a,b){if(a.initialized){var c=a.options.width/2,e=a.options.height/2,f="undefined"!==typeof b.pageX?b.pageX:b.clientX+document.documentElement.scrollLeft,g="undefined"!==typeof b.pageY?b.pageY:b.clientY+document.documentElement.scrollTop,h=-1*Math.floor((f-a.offset.left)*a.widthRatio-c),i=-1*Math.floor((g-a.offset.top)*a.heightRatio-e);document.body.style.cursor="none";a.loupe.style.display="block";a.loupe.style.left=f-c+"px";a.loupe.style.top=g-e+"px";a.loupe.style.backgroundPosition=h+"px "+
i+"px"}};c.fn.okzoom.mouseout=function(a){a.loupe.style.display="none";a.loupe.style.background="none";a.listener.style.display="none";document.body.style.cursor="auto"}});
